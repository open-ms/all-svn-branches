<!-- $Maintainer: Marc Sturm $ -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator"
        content=
        "HTML Tidy for Linux/x86 (vers 12 April 2005), see www.w3.org">
        

  <title>OpenMS Installation Instructions</title>
  <link rel="stylesheet"
        media="all"
        href="../common/styles.css"
        type="text/css">
</head>

<body>
  <script type="text/javascript"
      src="../common/header.txt">
</script><!-- ........ Content starts here ........ -->


  <h1>Installation Instructions</h1>


  <h2>Read this!</h2>
  This document addresses OpenMS users and explains the
  installation procedure. It especially considers the installation
  of several libraries which are required by OpenMS. All
  installations are explained from sources, but you should consider
  using precompiled packages suited for your system.
  <br>
  <br>
	<b><font color="red">Note:</font></b> OpenMS does not yet run under <font color="red">Windows</font>, not even in Cygwin!  
  <br>
  <br>
  <font color="red"><b>All architectures:</b></font>
  <ul>
    <li>Autoconf version 2.59 or higher is needed for the installation of OpenMS and the contrib package. Autoconf can be downloaded from <a target="blank" href="http://www.gnu.org/software/autoconf/">http://www.gnu.org/software/autoconf/</a>.</li>
    <li>GCC 3.4.3 and lower will not work due to a bug.</li>
  </ul>

  <font color="red"><b>i386 architectures:</b></font>
  <ul>
    <li>OpenMS is tested with GCC 3.4.x (x&gt;=4), 4.0 and 4.1.</li>
    <li>Before you choose your compiler, see the notes on Qt installation below.</li>
  </ul>
  
  <font color="red"><b>x86_64 architectures:</b></font>
  <ul>
    <li>OpenMS is tested with GCC 4.0.</li>
    <li>If the built aborts with errors concerning 'compound literals' use <code>--disable-pedantic</code> in the OpenMS configure.</li>
    <li>If ANDI/MS tests fail, you can disable ANDI/MS using <code>--disable-andims</code> in the OpenMS configure.</li>
  </ul>

  <a name="libraries" id="libraries"></a>
  <h2>Installing required libraries</h2>
  OpenMS depends on several other libraries. Most of them are
  standard and should be present in many systems anyway. Some of
  those libraries again depend on others. Here is a little overview
  of the dependencies:

  <table cellpadding="2" cellspacing="0">
    <tr>
      <td align="left">&nbsp;</td>
      <td align="left">ANDI/MS</td>
      <td align="left">(requires NetCDF)</td>
    </tr>
    <tr>
      <td align="left">&nbsp;</td>
      <td align="left">Boost</td>
      <td align="left">&nbsp;</td>
    </tr>
    <tr>
      <td align="left">&nbsp;</td>
      <td align="left">GSL</td>
      <td align="left">&nbsp;</td>
    </tr>
    <tr>
      <td align="left">&nbsp;</td>
      <td align="left">CGAL</td>
      <td align="left">&nbsp;</td>
    </tr>
    <tr>
      <td align="left">&nbsp;</td>
      <td align="left">XERCES-C</td>
      <td align="left">&nbsp;</td>
    </tr>
    <tr>
      <td align="left">&nbsp;</td>
      <td align="left">libSVM</td>
      <td align="left">&nbsp;</td>
    </tr>
    <tr>
      <td align="left">&nbsp;</td>
      <td align="left">Qt</td>
      <td align="left">(requires other libraries for DB support e.g. MySQL)</td>
    </tr>
  </table>

  <BR>
  <b><font color="red">Note:</font></b> In order to make the
  installation of the required libraries easier, we composed a
  package containing the libraries ANDI/MS, NetCDF, GSL, CGAL, libSVM, XERCES-C and
  Boost. This contrib package has three advantages over manual
  installation

  <ul>
    <li>you get all the libraries in versions tested with OpenMS.</li>
    <li>it contains a configure script that builds all the libraries in one step.</li>
    <li>you don't have to spend hours reading installation instructions of all the libraries.</li>
    <li>we applied some patches the the libraries to fix some bugs. 
    		<BR><b> These bugs may be fatal if you do not use the contrib package.</b></li>
  </ul>
  We recommend using the contrib package! QT and MySQL are not
  contained in the contrib package as they are installed on most
  systems anyway. If they are not installed on your system, you
  have to install those two libraries first. 
  
  <a name="mysql" id="mysql"></a>
  <h3>MySQL</h3>
  The MySQL database is accessed by OpenMS through functionality
  provided by Qt. The MySQL versions 4.0.18 and 4.1.10a have been
  tested and used with OpenMS.
  <br>
  You can get the sources at <a href=
  "http://dev.mysql.com/downloads/mysql/4.1.html"
        target=
        "blank">http://dev.mysql.com/downloads/mysql/4.1.html</a>
        in the 'source download' section.
  <br>
  Good installation instructions for MySQL can be found at <a href=
  "http://dev.mysql.com/doc/mysql/en/installing-source.html"
        target=
        "blank">http://dev.mysql.com/doc/mysql/en/installing-source.html</a>.
  <br>
  Basically the installation boils down to this:

  <pre>
&gt; ./configure --prefix=&lt;prefix&gt;
&gt; make
&gt; make install
</pre>

  <a name="qt" id="qt"></a>
  <h3>Qt</h3>
  For GUI, database access and visualisation we use Qt. The Qt-x11-free versions 3.3.x and 3.3.x have 
  been tested and used with OpenMS. You can obtain the source from 
  <a href="http://www.trolltech.com/download/index.html" target="blank">http://www.trolltech.com/download/index.html</a>.
  <BR>
  <b>Note:</b> Version 4.x is not supported!
	<b>Note:</b> If you want to use the preinstalled binaries, make sure that
	the qt-devel package is installed.  

  <p>Run configure with the '-verbose' option. With that option a
  summary is shown before the you have to accept the licence. Make
  sure that MySQL (or any other DB you want to use) and OpenGL are
  support are enabled in the summary.</p>

  <pre>
&gt; ./configure -verbose (... see below)
&gt; gmake
</pre>

  <p><b>OpenGL support:</b> 
  <BR>
  On some systems OpenGL is only included in QT when you add the
  <code>-thread</code> flag to configure. Note that in that case you
  have to use the <code>--with-qt-mt</code> flag in the OpenMS
  configure.</p>

  <p><b>SQL support:</b>
  <br>
  Use the configure option '-qt-sql-&lt;driver&gt;' or
  -plugin-sql-&lt;driver&gt; to enable database support. There is a
  QT driver for a lot of SQL database provided by QT. Check the QT
  manual for details.</p>
  
  <a name="contrib" id="contrib"></a>
  <h3>Installing the other required libraries (using the contrib package)</h3>
  <font color=red>Note:</font> If you do not want to use the contrib package, you can find installation instructions
  for the required libraries <a href="install_without_contrib.html">here</a>.
  <br>
  <br>
  
  First download the contrib package.
  <br>
  After extracting the package call the following commands:

  <pre>
&gt; autoconf
&gt; ./configure
</pre>The following configure options can be used:

  <table border="0"  cellspacing="0" cellpadding="0">
    <tr>
      <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
      <td>
        <li>--with-compiler=CXX</li>
      </td>
      <td>&nbsp;use CXX as C++ compiler (default: g++)</td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
      <td>
        <li>--with-c-compiler=CC&nbsp;&nbsp;</li>
      </td>
      <td>&nbsp;use CC as C compiler (default: gcc)</td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
      <td>
         <li>--with-toolset=TS</li>
      </td>
      <td>&nbsp;use TS as boost toolset. make sure the compiler and toolset match (default: gcc)</td>
    </tr>
  </table>
  
  <BR>
  If you do not give any configure options, it is assumed that you
  want to use 'gcc' as C-compiler, 'g++' as C++-compiler and the
  boost toolset 'gcc'.
  <br>
  Next you can build all the libraries with

  <pre>
&gt; make
</pre>

  If everything worked, the following directories were created:

  <ul>
    <li>'lib/' or the given libdir
    <br>
    It contains the libraries needed for OpenMS.
    <br>
    This directory should be added to your LD_LIBRARY_PATH
    variable.</li>


    <li>'include/'
    <br>
    It contains the header files needed for OpenMS.</li>
  </ul>

	In order to point the OpenMS configure to the contrib libraries you can use the
	configure option '--with-default-path'. The default value of this option is 'OpenMS/contrib/'
	so you can move the contrib package there to make OpenMS find it automatically.

  <a name="openms" id="openms"></a>
  <h2>Installing OpenMS</h2>
  If you have not installed the libraries which OpenMS requires,
  please refer to the section <a href="#libraries">required
  libraries</a> above. Otherwise you might only get parts of the
  full OpenMS functionality.
  <br>
  Well - consider you have installed everything. Now you need to
  get the OpenMS source code. The latest stable version of OpenMS
  can be found in the <a href=
  "http://sourceforge.net/project/showfiles.php?group_id=90558">files</a>
  section. For further info see the <a href=
  "http://open-ms.sourceforge.net/download.html">download
  instructions</a>.
  <br>
  <br>
  After you got the source code go to the <tt>source</tt> directory and type
  in the following commands

  <pre>
&gt; autoconf
&gt; ./configure (... see 'configure --help' and below)
&gt; make
&gt; make install
</pre>This should do the job.
  <br>
  <br>
  The most important configure options are:

  <table border="0">
    <tr>
      <td>--with-default-path=DIR&nbsp;&nbsp;&nbsp;</td>
      <td>use default path DIR/include for header files and DIR/lib
      for libraries ("../contrib" if unset)</td>
    </tr>
    <tr>
      <td>--with-qt=QTDIR</td>
      <td>QT is installed in QTDIR.</td>
    </tr>
    <tr>
      <td>--with-qt-mt</td>
      <td>use a threadsafe version of the QT lib
      (libqt-mt)/TD&gt;</td>
    </tr>
    <tr>
      <td>--with-compiler=CXX</td>
      <td>use CXX as C++ compiler</td>
    </tr>
  </table>

  <br>
  If you encounter unsolvable problems during configure, a file
  called <b>config.diag.tar</b> is created. Please send this file
  together with a description of the problem by <a href=
  "http://open-ms.sourceforge.net/team.html">email</a>.

  <h2>Testing your OpenMS installation</h2>
  After you have installed OpenMS, you can test your installation
  by executing the following command:

  <pre>
&gt; cd &lt;path_to_OpenMS&gt;/source/
&gt; make test
</pre><b>Note</b>: You have to add the location of the OpenMS
library to the environment variable <b>LD_LIBRARY_PATH</b>. See the
output of 'make install' for details. Of course, the locations of
the other required libraries must also be added to LD_LIBRARY_PATH.
  <br>
  <br>
  <b>Note</b>: To test the DB connectivity, copy the file
  '&lt;path_to_OpenMS&gt;/source/TEST/DB_credentials_template.txt'
  to 'DB_credentials.txt' and fill in your DB access details. As
  long as the 'DB_credentials.txt' file remains there, the DB will
  be tested with any subsequent call of 'make test'.

  <h2>TOPP</h2>
	TOPP is a pipeline for the analysis of HPLC/MS data. It consists of several small applications that can be chained to create analysis pipelines tailored for a specific problem.
	<BR>
	<BR>
	The installation instructions of the TOPP Tools can be found <a href="../misc/TOPP.html">here</a>.
  <!-- ........ Content ends here ........ -->

  <br>
  <br>
  <br>
  <br>
</body>
</html>
